!function(t){t.fn.instaSlide=function(e){function i(t){var e=new RegExp("(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)}function r(t){return"IFRAME"==t[0].tagName?!0:void 0}var a,n={media:{images:[],video:[]},contentAttrs:{"class":"instaslide-content"},sliderAttrs:{"class":"instaslide-slider owl-carousel"},wrapperAttrs:{id:"image-slider-","class":"reveal-modal instaslide-modal"},wrapperCSS:{},owlOptions:{items:1,autoHeight:!0,navText:["",""],nav:!0,video:!0},onSliderShow:function(){}},s=t.extend(!0,{},n,e),o=t(this),d=function(){return this};d.prototype={init:function(t){return this.media=t,this.modal=this._build(t),this._add(this.modal),this._setupSlider(this.modal),this},_build:function(e){var i=t("<div />",{html:t("<div />").attr(s.contentAttrs)}).attr(s.wrapperAttrs).css(s.wrapperCSS),r=t("<a />",{"class":"close-reveal-modal",html:"&#215;"}),a=this._renderMedia(e),n=t("<div />",{click:function(t){t.stopPropagation()}}).attr(s.sliderAttrs);return i.attr({"data-reveal":"","aria-labelledby":"modalTitle","aria-hidden":!0,role:"dialog"}),n.append(a),i.find("."+s.contentAttrs["class"]).append([r,n]),i},_add:function(e){t("body").append(e),t(document).foundation("reveal","reflow")},_renderMedia:function(t){var e=this._renderImages(t.images),i=this._renderVideo(t.video);return e+i},_renderImages:function(t){for(var e="",i=0;i<t.length;i++)e+="<img src="+t[i].src+" alt="+t[i].altText+">";return e},_renderVideo:function(t){for(var e="",i=0;i<t.length;i++)e+="<div class='item-video'><a class='owl-video' href='"+t[i].src+"'></a></div>";return e},_setupSlider:function(e){var i=e.find(".owl-carousel").owlCarousel(s.owlOptions);i.on("resized.owl.carousel",function(e){var i=t(this);i.find(".owl-height").css("height",i.find(".owl-item.active").height())}),i.on("play.owl.video",function(t){console.log("video play"),setTimeout(function(){i.find("iframe").attr("height",i.find(".owl-stage-outer").height())},800)}),e.on("closed.fndtn.reveal",function(t){i.find("iframe").remove()})}};var l=function(t,e,i){return this.el=t,this.src=e,this.altText=i,this};l.prototype={strip:function(){var t=this.src;return t=t.split("?"),this.src=t[0],this},wrapCheck:function(e){var i=t(this.el),r=i.parent(),a="<a href='#' class='js-image-slider-item image-slider-item' data-index='"+e+"' data-reveal-id='"+s.wrapperAttrs.id+"'></a>";return r.is("picture")?(r.parent().not("a")?this._wrapElement(r,a):this._wrapElement(r.parent(),null,!0,e),this):(r.not("a")?this._wrapElement(i,a):this._wrapElement(r,null,!0,e),this)},onClick:function(){var e=t(this.el),i=this,r=e.closest(".js-image-slider-item"),a=r.attr("data-index");return r.on("click.owl",function(){setTimeout(function(){var e=t("#"+s.wrapperAttrs.id+" .owl-carousel").data("owl.carousel");null==e&&(e=t("#"+s.wrapperAttrs.id+" .owl-carousel").data("owlCarousel")),e._width=t("#"+s.wrapperAttrs.id+" .owl-carousel").width(),e.invalidate("width"),e.refresh(),0==a&&e.to(1,[0]),e.to(a,[0])},300),s.onSliderShow.call(i.el)}),this},_wrapElement:function(t,e,i,r){return null!=i?void t.addClass("js-image-slider-item image-slider-item").attr("data-index",r):void t.wrap(e)}};var c=function(t,e){return this.el=t,this.src=e,this};if(c.prototype={convert:function(){return this._stripEmbed(),this},_stripEmbed:function(){var t=this._getId(this.src);this.src="http://www.youtube.com/watch?v="+t},_getId:function(t){var e=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=t.match(e);return i&&11==i[2].length?i[2]:"error"}},s.wrapperAttrs.id+=o.attr("id")||Math.random().toString(36).substring(7),s.media.images.length>0)for(var u=0;u<s.media.images.length;u++){var h=s.media.images[u];i(h.src)?s.media.images[u]=new l(null,h.src,h.alt):s.media.images.splice(u,1)}var m;"undefined"!=s.media.images.length?m=s.media.images.length:0,o.find("img, iframe").each(function(){var e=t(this),i=e.attr("srcset")?e.attr("srcset"):e.attr("src");r(e)?s.media.video.push(new c(e[0],i).convert()):(s.media.images.push(new l(e[0],i,e.attr("alt")).strip().wrapCheck(m).onClick()),m++)}),a=(new d).init(s.media)}}(jQuery);